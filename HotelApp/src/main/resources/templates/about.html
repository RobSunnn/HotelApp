<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>About us</title>
</head>

<style>

    .text {
        display: flex;
        justify-content: space-around;

    }

    .forms-container {
        display: flex;
        justify-content: center;
        gap: 2rem;
    }

    .btn-primary {
        margin: 2em auto;

    }

    .container {
        text-align: center;

    }

    /*.container {*/
    /*    max-width: 50ch;*/
    /*}*/
    #comments {
        background-color: blue;
        border: 3px solid black;
        border-radius: 20%;


    }

    .author {
        font-style: italic;
    }

    .message-text {
        font-style: italic;
    }

    .allComments {
        display: flex;
        flex-grow: 1;
        justify-content: center;
        margin: 0 2em 0 2em;
    }

    .allComments p {
        max-width: 30ch;
    }

    #about {
        text-align: center;

    }
    .hidden {
        display: none;
    }

    .truncated {
        overflow: hidden;
        white-space: nowrap;
        text-overflow: ellipsis;
        max-width: 500px; /* Adjust as needed */
        display: inline-block; /* Ensures ellipsis are applied */
        vertical-align: top;
    }

    .message-text {
        position: relative;
    }

    .message-text p {
        word-break: break-word;
        overflow-wrap: break-word;
        white-space: pre-wrap; /* This ensures that whitespace is preserved but allows wrapping */
        max-height: 3em; /* Limit height to 3 lines (adjust as needed) */
        overflow: hidden;
    }

    .message-text.expanded p {
        white-space: pre-wrap; /* Allow wrapping when expanded */
        max-height: none; /* Remove height limit when expanded */
    }

    .showMoreBtn {
        display: none;
    }

    .truncated + .showMoreBtn {
        display: inline-block;
    }

    /*.message {*/
    /*    text-align: center;*/
    /*    width: 30%;*/
    /*    background-color: #F8F0E9;*/
    /*    padding: 1em;*/
    /*    !*margin-top: 50em;*!*/
    /*}*/

    /*.comments {*/
    /*    display: flex;*/
    /*}*/

</style>

<body>

<div th:insert="~{/fragments/nav-bar}"></div>


<section id="about" class="py-5">
    <h1 class="mb-4">About Our Hotel</h1>

    <div class="container">


        <div class="text">
            <p><b>Nestled in the heart of [City Name], [Hotel Name] is your oasis of luxury and comfort. Whether you're
                here
                for business, pleasure, or a bit of both, our hotel offers a seamless blend of modern sophistication and
                timeless elegance. From our elegantly appointed rooms to our top-notch amenities, every detail has been
                thoughtfully designed to ensure your stay is nothing short of extraordinary.</b></p>

            <p>At [Hotel Name], we pride ourselves on our exceptional service and warm hospitality. Our dedicated staff
                is
                always at your service, ready to cater to your every need and ensure your stay is as comfortable as
                possible. Start your day with a sumptuous breakfast at our gourmet restaurant, relax in our tranquil
                spa, or
                take a dip in our sparkling pool. For those looking to explore, our prime location puts you just steps
                away
                from [Cityâ€™s Major Attractions].</p>
        </div>

        <p><em>Experience the perfect blend of style, comfort, and convenience at [Hotel Name]. Book your stay today and
            discover why we are the preferred choice for discerning travelers.</em></p>

    </div>

</section>

<div class="allComments">


    <div class="comments" th:each="comment, iterStat : ${comments}">
        <div class="message" th:classappend="${iterStat.index >= 3} ? 'hidden'">
            <h5 class="author" th:text="'Author: ' + ${comment.author}">Author</h5>
            <div class="message-text">
                <p th:attr="data-full-text=${comment.commentContent}"
                   th:text="'&quot;' + ${comment.commentContent} + '&quot;'"
                   th:classappend="${comment.commentContent.length() > 100} ? 'truncated' : ''"></p>
            </div>
            <button class="showWholeComment" th:if="${comment.commentContent.length() > 100}">Show More</button>
        </div>
    </div>

    <button id="allComments" th:if="${comments.size()} > 3">Show All Comments</button>
</div>

<div class="forms-container">

    <section id="comments" class="py-5">

        <div class="container">

            <form th:action="@{/about/addComment}" th:method="POST" th:object="${addCommentBindingModel}">

                <h2 class="mb-4">Leave a comment</h2>

                <label for="author">Your Name or Nickname</label>
                <input type="text" class="form-control" id="author" th:field="*{author}"
                       th:errorclass="is-invalid"
                       min="3" max="30"
                       name="author" placeholder="Enter your name...">

                <small id="authorError" th:errors="*{author}"
                       class="invalid-feedback text-white  bg-danger rounded"></small>

                <label for="commentContent">Your comment</label>
                <textarea class="form-control" id="commentContent" rows="5" th:field="*{commentContent}"
                          th:errorclass="is-invalid"
                          name="commentContent" placeholder="Your comment here."></textarea>
                <br>
                <small id="commentError" th:errors="*{commentContent}"
                       class="invalid-feedback text-white  bg-danger rounded"></small>

                <small th:if="${successCommentMessage}" th:text="${successCommentMessage}" class="alert alert-success">
                    <!-- put some decoration after successful subscribe -->
                </small>

                <button type="submit" class="btn btn-primary">Leave a comment</button>

            </form>

        </div>

    </section>

</div>


<div th:insert="~{/fragments/footer}"></div>
<script>

    document.addEventListener("DOMContentLoaded", function() {
        // Handle "Show More" for individual long comments
        document.querySelectorAll('.showWholeComment').forEach(button => {
            button.addEventListener('click', function() {
                const messageText = this.previousElementSibling;
                messageText.classList.remove('truncated');
                messageText.classList.add('expanded');
                this.style.display = 'none';
            });
        });


        // Handle "Show More Comments" button
        const showMoreCommentsBtn = document.getElementById('allComments');
        if (showMoreCommentsBtn) {
            showMoreCommentsBtn.addEventListener('click', function() {
                document.querySelectorAll('.comments .hidden').forEach(comment => {
                    comment.classList.remove('hidden');
                });
                showMoreCommentsBtn.style.display = 'none';
            });
        }
    });

</script>
</body>
</html>