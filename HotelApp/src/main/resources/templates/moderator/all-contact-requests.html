<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Contact Requests</title>
    <style>
        body {
            background-image: url("/images/hotel2.jpg");
            background-size: 100% 100vh; /* Use viewport height for better responsiveness */
            background-repeat: no-repeat;
            background-attachment: fixed;

        }

        table,
        h2,
        h4 {
            text-align: center;
        }

        .container {
            margin-top: 5em;
        }

        .custom-dropdown {
            /*position: relative;*/
            display: flex;
            gap: 3em;
            justify-content: center;
            flex-direction: column;
            margin-top: 2em;

        }
        #commentTable tr.selected {
            background-color: black; /* Light grey background */
            color: white;
        }
        .buttons {
            display: flex;
            justify-content: center;
            gap: 1em;
        }

        .buttons a {
            align-self: center;
        }

        #commentTable {
            cursor: pointer;
            border: 5px solid #ddd; /* Adds a line between rows */
            max-height: 10vh; /* Adjust the max-height as needed */
            overflow-y: auto;
        }


        #commentTable th, #commentTable td {
            padding: 8px;
            border: 2px solid #ddd; /* Adds a line between rows */
        }

        #fullMessage {

            padding:30px;
            background-color: #f9f9f9;
            max-width: 100%; /* Adjust based on your layout */
            max-height: 100%; /* Adjust based on your layout */
            overflow-y: auto; /* Adds a scrollbar if content is too long */
            word-wrap: break-word; /* Breaks long words */
            word-break: break-all; /* Breaks long words */
            white-space: pre-wrap; /* Preserves whitespace */
            text-align: center;
            border: 5px solid black; /* Adds a line between rows */

        }
    </style>
</head>
<body>
<div th:insert="~{/fragments/nav-bar}"></div>

<div class="container p-3 bg-dark rounded">

    <h2 class="text-white mt-2">New Contact Requests</h2>

    <div class="custom-dropdown p-3">
        <table class="bg-white" id="commentTable">
            <thead>
            <tr>
                <th>Date</th>
                <th>Author</th>
                <th>Email</th>
                <th>Phone</th>
                <th>Message</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="request, iterStat : ${allNotCheckedContactRequest}" th:data-full-text="${request.message}" th:classappend="${iterStat.index == 0} ? 'selected'" th:data-content-id="${request.id}">
                <td th:text="${request.created.toLocalDate()}"></td>
                <td th:text="${request.name}"></td>
                <td th:text="${request.email}"></td>
                <td th:text="${request.phoneNumber}"></td>
                <td th:text="${#strings.abbreviate(request.message, 30)}"></td>
            </tr>
            </tbody>
        </table>

        <h4 class="text-white">Message will be displayed here</h4>
        <div id="fullMessage">
        </div>

    </div>


    <br>
    <br>
    <div class="buttons">

        <a th:href="@{/moderatorPanel}" class="btn btn-primary">Go back <br> to your panel</a>

        <form th:action="@{/moderatorPanel/requestChecked}" th:method="POST">
            <input type="hidden" id="selectedContentId" name="id"/>
            <button type="submit" class="btn btn-success">Done</button>
        </form>

    </div>


</div>

<div th:insert="~{/fragments/footer}"></div>

<script src="/js/commentsAndContactRequestsScript.js"></script>

</body>
</html>